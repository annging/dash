(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bd919c78"],{"054f":function(e,t,n){"use strict";n.r(t),function(e){n("28a5");var t=n("b775");(function(){var n={qiniuRegion:"",qiniuBucketURLPrefix:"",qiniuUploadToken:"",qiniuUploadTokenURL:"",qiniuUploadTokenFunction:function(){},qiniuShouldUseQiniuFileName:!1};function i(e){Object(t["a"])({url:"api/v1/upload/token",method:"GET",data:{}}).then((function(t){uni.setStorageSync("QINIU-TOKEN",t),e.uptoken=t,o(e)}))}function o(e){e.region?n.qiniuRegion=e.region:console.error("qiniu uploader need your bucket region"),e.uptoken?n.qiniuUploadToken=e.uptoken:e.uptokenURL?n.qiniuUploadTokenURL=e.uptokenURL:e.uptokenFunc&&(n.qiniuUploadTokenFunction=e.uptokenFunc),e.domain&&(n.qiniuBucketURLPrefix=e.domain),e.BucketName&&(n.BucketName=e.BucketName),n.qiniuShouldUseQiniuFileName=e.shouldUseQiniuFileName}function a(e,t,i,a,s,c){if(null!=e)if(a&&o(a),n.qiniuUploadToken)r(e,t,i,a,s,c);else if(n.qiniuUploadTokenURL)l((function(){r(e,t,i,a,s,c)}));else{if(!n.qiniuUploadTokenFunction)return void console.error("qiniu uploader need one of [uptoken, uptokenURL, uptokenFunc]");if(n.qiniuUploadToken=n.qiniuUploadTokenFunction(),null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)return void console.error("qiniu UploadTokenFunction result is null, please check the return value");r(e,t,i,a,s,c)}else console.error("qiniu uploader need filePath to upload")}function r(e,t,i,o,a,r){if(null==n.qiniuUploadToken&&n.qiniuUploadToken.length>0)console.error("qiniu UploadToken is null, please check the init config or networking");else{var l=s(n.qiniuRegion),c=e.split("//")[1];o&&o.key&&(c=o.key);var u={token:n.qiniuUploadToken};n.qiniuShouldUseQiniuFileName||(u["key"]=c),n.BucketName&&(u["bucket_name"]=n.BucketName);var d=wx.uploadFile({url:l,filePath:e,name:"file",formData:u,success:function(e){var o=e.data;try{var a=JSON.parse(o),r=n.qiniuBucketURLPrefix+"/"+a.key;a.fileURL=r,a.imageURL=r,console.log(a),t&&t(a)}catch(l){console.log("parse JSON failed, origin String is: "+o),i&&i(l)}},fail:function(e){console.error(e),i&&i(e)}});d.onProgressUpdate((function(e){a&&a(e)})),r&&r((function(){d.abort()}))}}function l(e){wx.request({url:n.qiniuUploadTokenURL,success:function(t){var i=t.data.uptoken;i&&i.length>0?(n.qiniuUploadToken=i,e&&e()):console.error("qiniuUploader cannot get your token, please check the uptokenURL or server")},fail:function(e){console.error("qiniu UploadToken is null, please check the init config or networking: "+e)}})}function s(e){var t=null;switch(e){case"ECN":t="https://up.qiniup.com";break;case"NCN":t="https://up-z1.qiniup.com";break;case"SCN":t="https://up-z2.qiniup.com";break;case"NA":t="https://up-na0.qiniup.com";break;case"ASG":t="https://up-as0.qiniup.com";break;default:console.error("please make the region is with one of [ECN, SCN, NCN, NA, ASG]")}return t}e.exports={init:i,upload:a}})()}.call(this,n("dd40")(e))},"0e9f":function(e,t,n){},"219c":function(e,t,n){},"2f73":function(e,t,n){"use strict";var i=n("af47"),o=n.n(i);o.a},3097:function(e,t,n){"use strict";var i=n("44d3"),o=n.n(i);o.a},3948:function(e,t,n){"use strict";var i=n("0e9f"),o=n.n(i);o.a},"44d3":function(e,t,n){},"456d":function(e,t,n){var i=n("4bf8"),o=n("0d58");n("5eda")("keys",(function(){return function(e){return o(i(e))}}))},"4da7":function(e,t,n){"use strict";var i=n("219c"),o=n.n(i);o.a},"5eda":function(e,t,n){var i=n("5ca1"),o=n("8378"),a=n("79e5");e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*a((function(){n(1)})),"Object",r)}},"627e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-content"},[n("div",{staticClass:"left-container"},[n("el-menu",{staticStyle:{"margin-bottom":"20px"},attrs:{"default-active":"1",mode:"horizontal",router:""}},[n("el-menu-item",{attrs:{index:"1",route:{path:"/activity/fangan/create/"}}},[e._v("添加方案")])],1),e._v(" "),n("el-row",[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.schemeForm,"label-width":"100px",size:"small"}},[n("el-form-item",{attrs:{label:"方案标题"}},[n("el-input",{model:{value:e.schemeForm.title,callback:function(t){e.$set(e.schemeForm,"title",t)},expression:"schemeForm.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"封面图"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!1,action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleSuccess,"on-preview":e.handlePicturePreview,"on-remove":e.handleRemove}},[e.schemeForm.cover?n("img",{staticClass:"avatar",attrs:{src:e.schemeForm.cover}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.schemeForm.cover,alt:""}})])],1),e._v(" "),n("el-form-item",{attrs:{label:"方案介绍"}},[n("tinymce",{attrs:{height:380},model:{value:e.schemeForm.desc,callback:function(t){e.$set(e.schemeForm,"desc",t)},expression:"schemeForm.desc"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"活动类型"}},[n("el-select",{attrs:{placeholder:"请选择活动类型"},model:{value:e.schemeForm.type,callback:function(t){e.$set(e.schemeForm,"type",t)},expression:"schemeForm.type"}},e._l(e.activityTypes,(function(e){return n("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"活动类型"}},[n("el-select",{attrs:{placeholder:"请选择活动类型"},model:{value:e.schemeForm.industry,callback:function(t){e.$set(e.schemeForm,"industry",t)},expression:"schemeForm.industry"}},e._l(e.industrys,(function(e){return n("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"虚拟浏览量"}},[n("el-input",{model:{value:e.schemeForm.addView,callback:function(t){e.$set(e.schemeForm,"addView",t)},expression:"schemeForm.addView"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"虚拟参与量"}},[n("el-input",{model:{value:e.schemeForm.addParticipate,callback:function(t){e.$set(e.schemeForm,"addParticipate",t)},expression:"schemeForm.addParticipate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"权重"}},[n("el-input",{attrs:{placeholder:"值越大，越靠前"},model:{value:e.schemeForm.power,callback:function(t){e.$set(e.schemeForm,"power",t)},expression:"schemeForm.power"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即添加")]),e._v(" "),n("el-button",[e._v("取消")])],1)],1)],1)],1)])},o=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:e.imageSuccessCBK}})],1)])},r=[],l=(n("ac6a"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n    上传图片\n  ")]),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n        点击上传\n      ")])],1),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("\n      取消\n    ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      确认\n    ")])],1)],1)}),s=[],c=(n("456d"),n("054f"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var e=this;return Object.keys(this.listObj).every((function(t){return e.listObj[t].hasSuccess}))},handleSubmit:function(){var e=this,t=Object.keys(this.listObj).map((function(t){return e.listObj[t]}));this.checkAllSuccess()?(this.$emit("successCBK",t),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(e,t){for(var n=t.uid,i=Object.keys(this.listObj),o=0,a=i.length;o<a;o++)if(this.listObj[i[o]].uid===n)return this.listObj[i[o]].url=e.files.file,void(this.listObj[i[o]].hasSuccess=!0)},handleRemove:function(e){for(var t=e.uid,n=Object.keys(this.listObj),i=0,o=n.length;i<o;i++)if(this.listObj[n[i]].uid===t)return void delete this.listObj[n[i]]},beforeUpload:function(e){var t=this,n=window.URL||window.webkitURL,i=e.uid;return this.listObj[i]={},new Promise((function(o,a){var r=new Image;r.src=n.createObjectURL(e),r.onload=function(){t.listObj[i]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},o(!0)}))}}}),u=c,d=(n("3948"),n("2877")),m=Object(d["a"])(u,l,s,!1,null,"4e5d9268",null),f=m.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=p,b=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],g=b,v=n("2d63"),y=[];function k(){return window.tinymce}var w=function(e,t){var n=document.getElementById(e),i=t||function(){};if(!n){var o=document.createElement("script");o.src=e,o.id=e,document.body.appendChild(o),y.push(i);var a="onload"in o?r:l;a(o)}function r(t){t.onload=function(){this.onerror=this.onload=null;var e,n=Object(v["a"])(y);try{for(n.s();!(e=n.n()).done;){var i=e.value;i(null,t)}}catch(o){n.e(o)}finally{n.f()}y=null},t.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+e),t)}}function l(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var t,n=Object(v["a"])(y);try{for(n.s();!(t=n.n()).done;){var i=t.value;i(null,e)}}catch(o){n.e(o)}finally{n.f()}y=null}}}n&&i&&(k()?i(null,n):y.push(i))},_=w,U="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",F={name:"Tinymce",components:{editorImage:f},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?"".concat(e,"px"):e}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var e=this;_(U,(function(t){t?e.$message.error(t.message):e.initTinymce()}))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:g,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){t.value&&n.setContent(t.value),t.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",n.getContent())}))},setup:function(e){e.on("FullscreenStateChanged",(function(e){t.fullscreen=e.state}))}})},destroyTinymce:function(){var e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(e){var t=this;e.forEach((function(e){window.tinymce.get(t.tinymceId).insertContent('<img class="wscnph" src="'.concat(e.url,'" >'))}))}}},q=F,S=(n("2f73"),Object(d["a"])(q,a,r,!1,null,"2e7ca200",null)),N=S.exports,C={title:"",cover:"",type:"",industry:"",desc:"",addView:0,addParticipate:0,power:"",id:""},j={name:"CreateScheme",components:{Tinymce:N},data:function(){return{schemeForm:Object.assign({},C),activityTypes:[{key:1,label:"报名"},{key:2,label:"抽奖"},{key:3,label:"海报"},{key:4,label:"砍价"},{key:5,label:"秒杀"},{key:6,label:"拼团"},{key:7,label:"投票"},{key:8,label:"预约"},{key:9,label:"助力"},{key:10,label:"代金券"},{key:11,label:"折扣券"},{key:12,label:"兑换券"},{key:13,label:"体验券"}],industrys:[{key:1,label:"教育"},{key:2,label:"体育"},{key:3,label:"珠宝"}],rules:{title:[{required:!0,message:"请输入方案标题",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],type:[{required:!0,message:"请选择一个活动类型",trigger:"change"}],industry:[{required:!0,message:"请选择一个行业",trigger:"change"}],desc:[{required:!0,message:"请填写方案介绍",trigger:"blur"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}]},dialogImageUrl:"",dialogVisible:!1}},methods:{onSubmit:function(){console.log("submit!")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e,t){this.schemeForm.cover=URL.createObjectURL(t.raw)},handlePicturePreview:function(){this.dialogVisible=!0}}},T=j,O=(n("3097"),n("4da7"),Object(d["a"])(T,i,o,!1,null,"8c151c2a",null));t["default"]=O.exports},aa77:function(e,t,n){var i=n("5ca1"),o=n("be13"),a=n("79e5"),r=n("fdef"),l="["+r+"]",s="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(e,t,n){var o={},l=a((function(){return!!r[e]()||s[e]()!=s})),c=o[e]=l?t(m):r[e];n&&(o[n]=c),i(i.P+i.F*l,"String",o)},m=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},af47:function(e,t,n){},c5f6:function(e,t,n){"use strict";var i=n("7726"),o=n("69a8"),a=n("2d95"),r=n("5dbc"),l=n("6a99"),s=n("79e5"),c=n("9093").f,u=n("11e9").f,d=n("86cc").f,m=n("aa77").trim,f="Number",p=i[f],h=p,b=p.prototype,g=a(n("2aeb")(b))==f,v="trim"in String.prototype,y=function(e){var t=l(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():m(t,3);var n,i,o,a=t.charCodeAt(0);if(43===a||45===a){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+t}for(var r,s=t.slice(2),c=0,u=s.length;c<u;c++)if(r=s.charCodeAt(c),r<48||r>o)return NaN;return parseInt(s,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(g?s((function(){b.valueOf.call(n)})):a(n)!=f)?r(new h(y(t)),n,p):y(t)};for(var k,w=n("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;w.length>_;_++)o(h,k=w[_])&&!o(p,k)&&d(p,k,u(h,k));p.prototype=b,b.constructor=p,n("2aba")(i,f,p)}},dd40:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);